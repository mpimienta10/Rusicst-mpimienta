<div class="">
    <div class="rusicst-overlay rusicst-overlay-loading" ng-hide="started">
    </div>
    <div class="row"> <h2>Informe de respuestas</h2></div>
    <div class="row"> <h5>Aquí podrá generar el informe de respuestas de una encuesta. Luego de generarlo, lo podrá exportar a Excel para su posterior procesamiento</h5></div>
    <div class="row">
        <form role="form" class="form-horizontal" name="myForm" novalidate>
            <div class="col-sm-7">
                <div class="sombra panel panel-default">
                    <div class="panel-heading">Criterios de búsqueda</div>
                    <div class="panel-body">
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="encuesta">Reporte:</label>
                            <div class="separar col-sm-9">
                                <select id="encuesta" name="encuesta" ng-change="cargarSecciones()" ng-model="filtro.idEncuesta" class="form-control input-sm ng-pristine ng-valid">
                                    <option ng-repeat="item in encuestas" value="{{item.Id}}">{{item.Titulo}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" ng-show="secciones.length>0">
                            <div class="col-sm-12 col-sm-offset-1">
                                <label class="col-sm-3 control-label-left-10" for="grupo">Secciones:</label>
                                <label class="control-label-left-10 col-sm-11">
                                    <input type="checkbox" ng-click="seleccionarTodo()" class="col-sm-1" />
                                    Seleccionar Todo
                                </label>
                                <div class="col-sm-12" ng-repeat="item in secciones">
                                    <label class="control-label-left-10 col-sm-11">
                                        <input type="checkbox" ng-show="item.ListaSubsecciones==null || item.ListaSubsecciones.length==0" ng-model="item.check" ng-checked="item.check" class="col-sm-1" />
                                        {{item.Titulo}}
                                    </label>

                                    <div class="col-sm-12" ng-repeat="item2 in item.ListaSubsecciones">
                                        <label class="control-label-left-10 col-sm-11">
                                            <input type="checkbox" ng-show="item2.ListaSubsecciones==null || item2.ListaSubsecciones.length==0" ng-model="item2.check" ng-checked="item2.check" class="col-sm-1" />
                                            {{item2.Titulo}}
                                        </label>

                                        <div class="col-sm-12" ng-repeat="item3 in item2.ListaSubsecciones">
                                            <label class="control-label-left-10 col-sm-11">
                                                <input type="checkbox" ng-click="agregarSeccion($index)" ng-model="item3.check" ng-checked="item3.check" class="col-sm-1" />
                                                {{item3.Titulo}}
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" ng-show="Usuario.idTipoUsuario != 2 && Usuario.idTipoUsuario != 7">
                            <label class="col-sm-3 control-label" for="GobernaciónSelect">Departamento:</label>
                            <div class="separar col-sm-9">
                                <select id="GobernacionSelect" ng-change="cargarComboMunicipios()" name="GobernacionSelect" ng-model="filtro.departamento" class="form-control input-sm ng-pristine ng-valid">
                                    <option ng-repeat="item in gobernaciones" value="{{item.IdDepartamento}}">{{item.Departamento}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" ng-show="Usuario.idTipoUsuario != 2">
                            <label class="col-sm-3 control-label" for="alcaldiaSelect">Municipio:</label>
                            <div class="separar col-sm-9">
                                <select id="alcaldiaSelect" name="alcaldiaSelect" ng-model="filtro.municipio" class="form-control input-sm ng-pristine">
                                    <option></option>
                                    <option ng-repeat="item in alcaldias" value="{{item.IdMunicipio}}">{{item.Municipio}}</option>
                                </select>
                            </div>
                        </div>
                        <button type="button" class="btnNew" ng-click="submitted=true;filtrar()">Buscar</button>
                    </div>
                </div>
            </div>
            <div class="col-sm-5">
                <div class="alert alert-warning" role="alert">
                    <h2>Advertencia</h2>
                    <h3 style="font-size:14px; text-align: justify"> importante que tenga en cuenta que entre menos específica sea la búsqueda, es decir, que tenga menos criterios de búsqueda, más información tendrá el sistema que preparar; esto tendrá repercusión en el desempeño general del sistema. Si definitivamente requiere el informe de respuestas con pocos criterios de búsqueda, le recomendamos que realice la búsqueda durante horas no laborales cuando el servidor se encuentre con menos carga.</h3>
                </div>
            </div>
        </form>
    </div>
    <div class="row">
        <button class="btn btn-default pull-right" ng-if="isGrid" ng-click="limpiarAgrupacion();">
            <i class="fa fa-object-ungroup"></i> limpiar Agrupación
        </button>
    </div>
    <div class="row">
        <span class="col-sm-12 rusicst-center" ng-show="cargoDatos"><i class="fa fa-spinner fa-pulse fa-2x fa-fw loading"></i></span>
    </div>
    <div class="row">
        <div id="filterTable" ng-if="isGrid" ui-i18n="{{lang}}">
            <h3 id="titulo" class="titulo-rejilla">Informe de Respuestas</h3>
            <div id="grid1" ui-grid="gridOptions" class="grid" ui-grid-exporter ui-grid-grouping ui-grid-move-columns ui-grid-pagination ui-grid-resize-columns ui-grid-pinning ui-grid-auto-scroll ui-grid-auto-resize></div>
        </div>
        <!--@*<div class="margin-top">
            <button type="button" class="btn btn-primary" ng-click="openPopUp()" ng-if="isGrid">
                <span class="glyphicon glyphicon-plus"></span> Crear Filtro
            </button>
        </div>*@-->
    </div>
    <div class="form-group">
        <div class="alert alert-warning" ng-if="alerta" role="alert">{{alerta}}</div>
        <label class="text-danger" ng-if="error">{{error}}</label>
    </div>
</div>